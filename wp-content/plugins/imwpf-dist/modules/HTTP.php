<?php
 namespace imwpf\modules; class HTTP { public static function get($url, $timeout = 30, $header = '') { $context = stream_context_create(array( 'http' => array( 'method' => 'GET', 'header' => $header, 'timeout' => $timeout, ) )); $result = file_get_contents($url, null, $context); return $result; } public static function post($url, array $args, $timeout = 30) { $body = http_build_query($args); $header = 'Content-Type: application/x-www-form-urlencoded'; return self::request($url, $body, $header, $timeout); } public static function json($url, $json, $timeout = 30) { $body = json_encode($json, JSON_UNESCAPED_UNICODE); $header = 'Content-Type: application/json'; return self::request($url, $body, $header, $timeout); } public static function text($url, $text, $timeout = 30) { $header = 'Content-Type: text/plain'; return self::request($url, $text, $header, $timeout); } public static function request($url, $body, $header, $timeout = 30) { $params = array( 'http' => array( 'method' => 'POST', 'timeout' => $timeout, 'header' => $header, 'content' => $body, ) ); $context = stream_context_create($params); $result = file_get_contents($url, null, $context); return $result; } }